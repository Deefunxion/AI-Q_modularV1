<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Orchestrator's Ascent - Demo</title>
    
    <!-- Inline CSS for immediate testing -->
    <style>
        :root {
            --color-primary: #3b82f6;
            --color-secondary: #1e40af;
            --color-success: #22c55e;
            --color-warning: #f59e0b;
            --color-error: #ef4444;
            --color-text: #1f2937;
            --color-text-light: #6b7280;
            --color-bg: #ffffff;
            --color-bg-secondary: #f9fafb;
            --color-border: #e5e7eb;
            
            --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-family-mono: 'JetBrains Mono', 'Fira Code', monospace;
            
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            
            --radius-sm: 0.25rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
            
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            
            --transition-base: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-modal: 1050;
            --z-toast: 1060;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-primary);
            line-height: 1.6;
            color: var(--color-text);
            background-color: var(--color-bg);
            overflow-x: hidden;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--color-bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--color-border);
            border-top: 3px solid var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: var(--space-4);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--color-text-light);
            font-size: 0.875rem;
        }

        /* Navigation */
        .global-nav {
            background: var(--color-bg);
            border-bottom: 1px solid var(--color-border);
            padding: var(--space-4) var(--space-6);
            position: sticky;
            top: 0;
            z-index: var(--z-sticky);
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-brand {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-primary);
        }

        .nav-menu {
            display: flex;
            gap: var(--space-6);
            list-style: none;
        }

        .nav-link {
            color: var(--color-text);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition-base);
        }

        .nav-link:hover {
            color: var(--color-primary);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-8) var(--space-6);
            width: 100%;
        }

        .chapter-header {
            text-align: center;
            margin-bottom: var(--space-8);
        }

        .chapter-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: var(--space-2);
        }

        .chapter-subtitle {
            font-size: 1.125rem;
            color: var(--color-text-light);
            margin-bottom: var(--space-4);
        }

        .chapter-meta {
            display: flex;
            gap: var(--space-4);
            justify-content: center;
            align-items: center;
            font-size: 0.875rem;
            color: var(--color-text-light);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: var(--space-1);
        }

        /* Content Sections */
        .content-section {
            margin-bottom: var(--space-8);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: var(--space-4);
        }

        .section-content {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--color-text);
        }

        .section-content p {
            margin-bottom: var(--space-4);
        }

        .section-content ul {
            margin-left: var(--space-6);
            margin-bottom: var(--space-4);
        }

        .section-content li {
            margin-bottom: var(--space-2);
        }

        /* Exercise Section */
        .exercise-section {
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin: var(--space-8) 0;
        }

        .exercise-header {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-4);
        }

        .exercise-icon {
            width: 24px;
            height: 24px;
            color: var(--color-primary);
        }

        .exercise-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-text);
        }

        .exercise-content {
            margin-bottom: var(--space-4);
        }

        .exercise-button {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-base);
        }

        .exercise-button:hover {
            background: var(--color-secondary);
        }

        /* AI-Q Indicator */
        .aiq-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 12px;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            transition: var(--transition-base);
            z-index: var(--z-sticky);
        }

        .aiq-indicator:hover {
            transform: scale(1.05);
        }

        .aiq-value {
            font-size: 18px;
            font-weight: 700;
        }

        .aiq-label {
            font-size: 10px;
            opacity: 0.9;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-content {
                padding: 0 var(--space-4);
            }
            
            .main-content {
                padding: var(--space-6) var(--space-4);
            }
            
            .chapter-title {
                font-size: 2rem;
            }
            
            .chapter-meta {
                flex-direction: column;
                gap: var(--space-2);
            }
            
            .aiq-indicator {
                width: 60px;
                height: 60px;
                right: 10px;
                top: 70px;
            }
            
            .aiq-value {
                font-size: 14px;
            }
        }

        /* Hidden by default */
        .hidden {
            display: none !important;
        }
        
        /* Interactive Reading Enhancements */
        .paragraph-interaction-container,
        .element-interaction-container {
            position: relative;
            margin: 1em 0;
            padding-right: 60px;
        }
        
        .commit-button {
            position: absolute;
            right: -50px;
            top: 0;
            width: 32px;
            height: 32px;
            background-color: #10B981;
            color: white;
            border: 2px solid white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            border-radius: 50%;
            cursor: pointer;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16px;
            z-index: 1000;
        }
        
        .commit-button.visible {
            opacity: 1;
            right: 10px;
            pointer-events: auto;
        }
        
        .commit-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .commit-button.clicked {
            animation: micro-effect 0.4s ease-out forwards;
        }
        
        @keyframes micro-effect {
            0% {
                transform: scale(1);
                background: #10B981;
                box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            }
            25% {
                transform: scale(1.2);
                background: radial-gradient(circle, #10B981 0%, #059669 100%);
                box-shadow: 0 0 20px rgba(16, 185, 129, 0.8);
            }
            50% {
                transform: scale(1.6);
                background: radial-gradient(circle, #34D399 0%, #10B981 100%);
                opacity: 0.8;
                box-shadow: 0 0 30px rgba(52, 211, 153, 1);
            }
            100% {
                transform: scale(0);
                opacity: 0;
                background: #A7F3D0;
            }
        }
        
        /* Brain cell animations */
        .brain-cell-active {
            animation: brain-cell-pulse 2s infinite ease-in-out;
            filter: drop-shadow(0 0 4px rgba(255, 215, 0, 0.6));
        }
        
        @keyframes brain-cell-pulse {
            0%, 100% {
                transform: scale(1);
                filter: drop-shadow(0 0 4px rgba(255, 215, 0, 0.6));
            }
            50% {
                transform: scale(1.1);
                filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.8));
            }
        }
        
        /* Electrical spark animations */
        @keyframes electrical-spark-travel {
            0% {
                left: var(--spark-start-x);
                top: var(--spark-start-y);
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
                box-shadow: 0 0 12px #00FFFF, 0 0 24px #0080FF;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0.9;
                box-shadow: 0 0 20px #00FFFF, 0 0 40px #0080FF;
            }
            100% {
                left: var(--spark-end-x);
                top: var(--spark-end-y);
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0;
                box-shadow: 0 0 30px #00FFFF, 0 0 60px #0080FF;
            }
        }
        
        /* Sparkle burst animation */
        @keyframes sparkle-burst {
            0% {
                transform: translate(0, 0) scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: translate(
                    calc(var(--spark-x) * 0.7), 
                    calc(var(--spark-y) * 0.7)
                ) scale(1.2) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: translate(var(--spark-x), var(--spark-y)) scale(0) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Typography tiers for committed elements */
        .p-committed,
        .element-committed {
            background-color: #F0FDF4;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 4px;
            padding: 8px 12px;
            margin: 16px 0;
        }
        
        /* Level 1: AI-Q 100-119 */
        .p-committed.level-1,
        .element-committed.level-1 {
            background-color: #ECFDF5;
            text-align: justify;
            line-height: 1.7;
            padding: 10px 16px;
            border-left: 3px solid #10B981;
        }
        
        /* Level 2: AI-Q 120-139 */
        .p-committed.level-2,
        .element-committed.level-2 {
            background-color: #D1FAE5;
            text-align: justify;
            line-height: 1.7;
            text-indent: 2em;
            padding: 12px 20px;
            border-left: 4px solid #059669;
            box-shadow: 0 2px 4px rgba(16, 185, 129, 0.1);
        }
        
        /* Level 3: AI-Q 140-159 */
        .p-committed.level-3,
        .element-committed.level-3 {
            background-color: #A7F3D0;
            text-align: justify;
            line-height: 1.75;
            text-indent: 2em;
            font-family: "Georgia", "Palatino Linotype", serif;
            font-size: 16.5px;
            padding: 14px 24px;
            border-left: 5px solid #047857;
            border-radius: 6px;
            box-shadow: 0 4px 8px rgba(16, 185, 129, 0.15);
        }
        
        /* Level 4: AI-Q 160+ */
        .p-committed.level-4,
        .element-committed.level-4 {
            background: linear-gradient(135deg, #6EE7B7 0%, #A7F3D0 100%);
            text-align: justify;
            line-height: 1.8;
            text-indent: 2em;
            font-family: "Georgia", "Palatino Linotype", serif;
            font-size: 17px;
            letter-spacing: 0.5px;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
            padding: 16px 28px;
            border-left: 6px solid #065F46;
            border-radius: 8px;
            box-shadow: 
                0 6px 12px rgba(16, 185, 129, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
            position: relative;
        }
        
        .p-committed.level-4::before,
        .element-committed.level-4::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #047857, #10B981, #047857);
            border-radius: 8px 8px 0 0;
        }
        
        /* Remove text-indent from non-paragraph elements */
        h1.element-committed, h2.element-committed, h3.element-committed,
        h4.element-committed, h5.element-committed, h6.element-committed,
        li.element-committed {
            text-indent: 0 !important;
        }
    </style>
</head>
<body>
    <div id="app" class="app-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-spinner"></div>
            <div class="loading-text">Î¦ÏŒÏÏ„Ï‰ÏƒÎ· AI Orchestrator's Ascent...</div>
        </div>

        <!-- Global Navigation -->
        <nav class="global-nav hidden" id="global-nav">
            <div class="nav-content">
                <div class="nav-brand">AI Orchestrator's Ascent</div>
                <ul class="nav-menu">
                    <li><button onclick="toggleMarginalia()" class="nav-link" style="background:none;border:none;cursor:pointer;">âœï¸ Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚</button></li>
                    <li><button onclick="toggleReading()" class="nav-link" style="background:none;border:none;cursor:pointer;">ğŸ“Š Reading</button></li>
                    <li><button onclick="showStats()" class="nav-link" style="background:none;border:none;cursor:pointer;">ğŸ“ˆ Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬</button></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content hidden" id="main-content">
            <!-- Content will be loaded here -->
        </main>

        <!-- AI-Q Indicator -->
        <div class="aiq-indicator hidden" id="aiq-indicator">
            <div class="aiq-value" id="aiq-value">85</div>
            <div class="aiq-label">AI-Q</div>
        </div>
    </div>

    <!-- Load existing modules -->
    <link rel="stylesheet" href="components.css">
    <link rel="stylesheet" href="marginalia.css">
    <link rel="stylesheet" href="reading.css">
    <link rel="stylesheet" href="OLD_SCHOOL/interactive-reading.css">
    <script src="svg-marginalia.js"></script>
    <script src="marginalia.js"></script>
    <script src="reading.js"></script>
    <script src="aiq.js"></script>
    <script src="interactive-reading.js"></script>

    <div class="svg-filters">
        <svg width="0" height="0" style="position: absolute;">
            <defs>
                <filter id="glow-filter" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                    <feMerge> 
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/> 
                    </feMerge>
                </filter>
                <filter id="master-glow-filter" x="-100%" y="-100%" width="300%" height="300%">
                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                    <feOffset dx="0" dy="0" result="offsetBlur"/>
                    <feFlood flood-color="currentColor" flood-opacity="0.3"/>
                    <feComposite in="SourceGraphic" in2="offsetBlur" operator="over"/>
                    <feMerge>
                        <feMergeNode in="offsetBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
            </defs>
        </svg>
    </div>
    <canvas id="fullscreen-canvas"></canvas>

    <!-- Inline JavaScript -->
    <script>
        // Simple Application Class
        class SimpleAIOrchestrator {
            constructor() {
                this.currentAIQ = 85;
                this.contentData = {
                    "metadata": {
                        "title": "AI Orchestrator's Ascent",
                        "subtitle": "ÎŸ ÎŸÎ´Î·Î³ÏŒÏ‚ Ï„Î¿Ï… ÎˆÎ¾Ï…Ï€Î½Î¿Ï… Î‘ÏÏ‡Î¬ÏÎ¹Î±",
                        "author": "AI Orchestrator Team",
                        "version": "1.0.0",
                        "language": "el",
                        "totalChapters": 1
                    },
                    "chapters": [
                        {
                            "id": "test-chapter",
                            "title": "ÎšÎµÏ†Î¬Î»Î±Î¹Î¿ 1: Î— Î ÏÏÏ„Î· ÏƒÎ±Ï‚ Î£Ï…Î¶Î®Ï„Î·ÏƒÎ·",
                            "subtitle": "Î ÏÏ‚ Î½Î± Î•Î½Î·Î¼ÎµÏÏÏƒÎµÏ„Îµ Î­Î½Î±Î½ Î›Î±Î¼Ï€ÏÏŒ, ÎšÏ…ÏÎ¹Î¿Î»ÎµÎºÏ„Î¹ÎºÏŒ Î‘ÏƒÎºÎ¿ÏÎ¼ÎµÎ½Î¿",
                            "level": "Level 1: The Novice",
                            "estimatedTime": "20 Î»ÎµÏ€Ï„Î¬",
                            "content": {
                                "introduction": "Î¦Î±Î½Ï„Î±ÏƒÏ„ÎµÎ¯Ï„Îµ ÏŒÏ„Î¹ Î¼ÏŒÎ»Î¹Ï‚ Ï€ÏÎ¿ÏƒÎ»Î¬Î²Î±Ï„Îµ Ï„Î¿Î½ Ï€Î¹Î¿ Î­Î¾Ï…Ï€Î½Î¿ Î±ÏƒÎºÎ¿ÏÎ¼ÎµÎ½Î¿ Ï€Î¿Ï… ÎµÎ¯Ï‡Î±Ï„Îµ Ï€Î¿Ï„Î­. ÎˆÏ‡ÎµÎ¹ Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¹ÎºÎ® Î¼Î½Î®Î¼Î·, Î­Ï‡ÎµÎ¹ Î´Î¹Î±Î²Î¬ÏƒÎµÎ¹ ÎºÏ…ÏÎ¹Î¿Î»ÎµÎºÏ„Î¹ÎºÎ¬ ÏŒÎ»Î¿ Ï„Î¿ Î´Î¹Î±Î´Î¯ÎºÏ„Ï…Î¿, ÎºÎ±Î¹ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÏ„ÎµÎ¯ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Î¼Îµ Ï„Î±Ï‡ÏÏ„Î·Ï„Î± Ï€Î¿Ï… Î¾ÎµÏ€ÎµÏÎ½Î¬ Ï„Î·Î½ Î±Î½Î¸ÏÏÏ€Î¹Î½Î· Ï†Î±Î½Ï„Î±ÏƒÎ¯Î±. Î¥Ï€Î¬ÏÏ‡ÎµÎ¹ ÏŒÎ¼Ï‰Ï‚ Î­Î½Î± Ï€ÏÏŒÎ²Î»Î·Î¼Î±: ÎµÎ¯Î½Î±Î¹ Î±Ï€ÏŒÎ»Ï…Ï„Î± ÎºÏ…ÏÎ¹Î¿Î»ÎµÎºÏ„Î¹ÎºÏŒÏ‚ ÎºÎ±Î¹ Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎºÎ±Î¼Î¯Î± ÎºÏÎ¯ÏƒÎ·.",
                                "sections": [
                                    {
                                        "id": "chapter-intro",
                                        "title": "Î‘Ï…Ï„ÏŒ ÎµÎ¯Î½Î±Î¹ Î· Î¤Î",
                                        "content": "ÎŒÏ‡Î¹ Î­Î½Î±Ï‚ ÎµÎ¾Ï‰Î³Î®Î¹Î½Î¿Ï‚ Î½Î¿Ï…Ï‚. ÎŒÏ‡Î¹ Î­Î½Î±Ï‚ ÏˆÎ·Ï†Î¹Î±ÎºÏŒÏ‚ Î¸ÎµÏŒÏ‚. ÎˆÎ½Î±Ï‚ ÎµÎ¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ¬ Î¹ÎºÎ±Î½ÏŒÏ‚, ÎµÎ¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ¬ Î³ÏÎ®Î³Î¿ÏÎ¿Ï‚, ÎµÎ¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ¬ ÎºÏ…ÏÎ¹Î¿Î»ÎµÎºÏ„Î¹ÎºÏŒÏ‚ Î±ÏƒÎºÎ¿ÏÎ¼ÎµÎ½Î¿Ï‚.",
                                        "type": "text"
                                    },
                                    {
                                        "id": "biggest-lie",
                                        "title": "Î¤Î¿ ÎœÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿ Î¨Î­Î¼Î± Ï„Î·Ï‚ Î•Ï€Î¿Ï‡Î®Ï‚ Î¼Î±Ï‚",
                                        "content": "Î¤Î¿ Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ¿ ÎµÎ¼Ï€ÏŒÎ´Î¹Î¿ ÏƒÏ„Î· ÏƒÏ„ÏÎ±Ï„Î·Î³Î¹ÎºÎ® Ï‡ÏÎ®ÏƒÎ· Ï„Î·Ï‚ Î¤Î Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ Ï„ÎµÏ‡Î½Î¹ÎºÏŒâ€”ÎµÎ¯Î½Î±Î¹ ÎµÎ½Î½Î¿Î¹Î¿Î»Î¿Î³Î¹ÎºÏŒ. ÎœÎ±Ï‚ Î­Ï‡Î¿Ï…Î½ Ï€ÎµÎ¯ÏƒÎµÎ¹ ÏŒÏ„Î¹ Î· Î¤Î \"ÏƒÎºÎ­Ï†Ï„ÎµÏ„Î±Î¹.\" Î”ÎµÎ½ ÏƒÎºÎ­Ï†Ï„ÎµÏ„Î±Î¹. ÎœÎ±Ï‚ Î­Ï‡Î¿Ï…Î½ Ï€ÎµÎ¯ÏƒÎµÎ¹ ÏŒÏ„Î¹ \"ÎºÎ±Ï„Î±Î»Î±Î²Î±Î¯Î½ÎµÎ¹.\" Î”ÎµÎ½ ÎºÎ±Ï„Î±Î»Î±Î²Î±Î¯Î½ÎµÎ¹. ÎœÎ±Ï‚ Î­Ï‡Î¿Ï…Î½ Ï€ÎµÎ¯ÏƒÎµÎ¹ ÏŒÏ„Î¹ ÎµÎ¯Î½Î±Î¹ \"Î­Î¾Ï…Ï€Î½Î·.\" Î•Î¯Î½Î±Î¹ Î±Ï€Î»ÏÏ‚ Ï€Î¿Î»Ï ÎºÎ±Î»Î® ÏƒÏ„Î¿ Î½Î± Î¼Î¹Î¼ÎµÎ¯Ï„Î±Î¹ Ï„Î·Î½ ÎµÎ¾Ï…Ï€Î½Î¬Î´Î±.",
                                        "type": "text"
                                    },
                                    {
                                        "id": "what-ai-does",
                                        "title": "Î¤Î¹ ÎšÎ¬Î½ÎµÎ¹ Î ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ¬ Î· Î¤Î: Î— ÎœÎµÏ„Î¬Ï†Î¿ÏÎ± Ï„Î¿Ï… Î‘ÏƒÎºÎ¿ÏÎ¼ÎµÎ½Î¿Ï…",
                                        "content": "Î‘Ï‚ ÎºÎ±Ï„Î±ÏƒÏ„ÏÎ­ÏˆÎ¿Ï…Î¼Îµ Ï„Î· Î¼Ï…Î¸Î¿Î»Î¿Î³Î¯Î± ÎºÎ±Î¹ Î±Ï‚ Î±Î½Ï„Î¹ÎºÎ±Ï„Î±ÏƒÏ„Î®ÏƒÎ¿Ï…Î¼Îµ Ï„Î· Î¼Îµ ÎºÎ¬Ï„Î¹ Ï‡ÏÎ®ÏƒÎ¹Î¼Î¿. Î— Î¤Î ÎµÎ¯Î½Î±Î¹ ÏƒÎ±Î½ Î­Î½Î±Î½ ÎµÎ¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ¬ Ï„Î±Î»Î±Î½Ï„Î¿ÏÏ‡Î¿ Î±ÏƒÎºÎ¿ÏÎ¼ÎµÎ½Î¿ Î¼Îµ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î± Î´Ï…Î½Î±Ï„Î¬ ÏƒÎ·Î¼ÎµÎ¯Î± ÎºÎ±Î¹ Î±Î´Ï…Î½Î±Î¼Î¯ÎµÏ‚.",
                                        "type": "text"
                                    },
                                    {
                                        "id": "framework-strengths",
                                        "title": "Î”Ï…Î½Î±Ï„Î¬ Î£Î·Î¼ÎµÎ¯Î± Ï„Î·Ï‚ Î¤Î",
                                        "content": "â€¢ Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¹ÎºÎ® Î¼Î½Î®Î¼Î· Î³Î¹Î± Ï„ÎµÏÎ¬ÏƒÏ„Î¹ÎµÏ‚ Ï€Î¿ÏƒÏŒÏ„Î·Ï„ÎµÏ‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½\nâ€¢ Î¤Î±Ï‡ÏÏ„Î·Ï„Î± ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ Ï€Î¿Ï… Î¾ÎµÏ€ÎµÏÎ½Î¬ Ï„Î·Î½ Î±Î½Î¸ÏÏÏ€Î¹Î½Î· ÎºÎ±Ï„Î±Î½ÏŒÎ·ÏƒÎ·\nâ€¢ Î‘ÎºÎ¿ÏÏÎ±ÏƒÏ„Î· ÎµÏÎ³Î±ÏƒÎ¯Î± 24/7 Ï‡Ï‰ÏÎ¯Ï‚ Ï€Î±ÏÎ¬Ï€Î¿Î½Î±\nâ€¢ Î•Î¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ® ÏƒÏ„Î·Î½ Î±Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ· Î¼Î¿Ï„Î¯Î²Ï‰Î½ ÎºÎ±Î¹ ÏƒÏ„Î· ÏƒÏÎ½Î¸ÎµÏƒÎ· Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÏÎ½\nâ€¢ Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ ego, Î´ÎµÎ½ Ï€Î±Î¯ÏÎ½ÎµÎ¹ Ï€ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÎ¬ Ï„Î¹Ï‚ Î´Î¹Î¿ÏÎ¸ÏÏƒÎµÎ¹Ï‚",
                                        "type": "text"
                                    },
                                    {
                                        "id": "framework-weaknesses",
                                        "title": "Î‘Î´Ï…Î½Î±Î¼Î¯ÎµÏ‚ Ï„Î·Ï‚ Î¤Î",
                                        "content": "â€¢ Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎºÏÎ¯ÏƒÎ· Î® ÎºÎ¿Î¹Î½Î® Î»Î¿Î³Î¹ÎºÎ®\nâ€¢ Î Î±Î¯ÏÎ½ÎµÎ¹ Ï„Î¹Ï‚ Î¿Î´Î·Î³Î¯ÎµÏ‚ Î±Ï€ÏŒÎ»Ï…Ï„Î± ÎºÏ…ÏÎ¹Î¿Î»ÎµÎºÏ„Î¹ÎºÎ¬\nâ€¢ Î”ÎµÎ½ ÎºÎ±Ï„Î±Î»Î±Î²Î±Î¯Î½ÎµÎ¹ Ï„Î¿ Ï€Î»Î±Î¯ÏƒÎ¹Î¿ ÎµÎºÏ„ÏŒÏ‚ Î±Î½ Ï„Î¿Ï… Ï„Î¿ ÎµÎ¾Î·Î³Î®ÏƒÎµÏ„Îµ ÏÎ·Ï„Î¬\nâ€¢ ÎœÏ€Î¿ÏÎµÎ¯ Î½Î± \"Ï€Î±ÏÎ±Î¹ÏƒÎ¸Î¬Î½ÎµÏ„Î±Î¹\" Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Ï€Î¿Ï… Î±ÎºÎ¿ÏÎ³Î¿Î½Ï„Î±Î¹ Î»Î¿Î³Î¹ÎºÎ­Ï‚\nâ€¢ Î”ÎµÎ½ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎºÏÎ¯Î½ÎµÎ¹ Ï„Î·Î½ Ï€Î¿Î¹ÏŒÏ„Î·Ï„Î± Ï„Ï‰Î½ Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î¬Ï„Ï‰Î½ Ï„Î¿Ï…",
                                        "type": "text"
                                    },
                                    {
                                        "id": "capability-framework",
                                        "title": "Î¤Î¿ Î Î»Î±Î¯ÏƒÎ¹Î¿ \"ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î”Ï…Î½Î±Ï„Î¿Ï„Î®Ï„Ï‰Î½\"",
                                        "content": "Î ÏÎ¹Î½ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Î¿Ï€Î¿Î¹Î¿Î´Î®Ï€Î¿Ï„Îµ ÎµÏÎ³Î±Î»ÎµÎ¯Î¿ Î¤Î Î³Î¹Î± Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ ÎµÏÎ³Î±ÏƒÎ¯Î±, ÎµÏ†Î±ÏÎ¼ÏŒÏƒÏ„Îµ Î±Ï…Ï„ÏŒ Ï„Î¿ Ï„ÎµÏ„ÏÎ¬Ï€Ï„Ï…Ï‡Î¿ Ï†Î¯Î»Ï„ÏÎ¿:\n\n1. Î•ÏÏÏ„Î·ÏƒÎ· ÎšÏ…ÏÎ¹Î¿Î»ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚: \"ÎœÏ€Î¿ÏÏ Î½Î± Î´ÏÏƒÏ‰ ÏƒÎ±Ï†ÎµÎ¯Ï‚, ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½ÎµÏ‚ Î¿Î´Î·Î³Î¯ÎµÏ‚ Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Î²Î±ÏƒÎ¯Î¶Î¿Î¼Î±Î¹ ÏƒÏ„Î·Î½ ÎºÏÎ¯ÏƒÎ·;\"\n\n2. Î•ÏÏÏ„Î·ÏƒÎ· Î•Ï€Î±Î»Î®Î¸ÎµÏ…ÏƒÎ·Ï‚: \"ÎœÏ€Î¿ÏÏ Î½Î± ÎµÎ»Î­Î³Î¾Ï‰ Ï„Î·Î½ Î±ÎºÏÎ¯Î²ÎµÎ¹Î± Ï„Ï‰Î½ Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î¬Ï„Ï‰Î½ Î¼Îµ Ï„Î· Î´Î¹ÎºÎ® Î¼Î¿Ï… Î³Î½ÏÏƒÎ·;\"\n\n3. Î•ÏÏÏ„Î·ÏƒÎ· Î Î»Î±Î¹ÏƒÎ¯Î¿Ï…: \"ÎˆÏ‡Ï‰ Ï€Î±ÏÎ¬ÏƒÏ‡ÎµÎ¹ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚ Ï€Î¿Ï… Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î³Î¹Î± Î½Î± Ï€Î±ÏÎ¬Î³ÎµÎ¹ Ï‡ÏÎ®ÏƒÎ¹Î¼Î¿ Î±Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î±;\"\n\n4. Î•ÏÏÏ„Î·ÏƒÎ· Î‘Î¾Î¯Î±Ï‚: \"Î— ÎµÏÎ³Î±ÏƒÎ¯Î± Ï€Î¿Ï… Î¸Î± ÎµÎºÏ„ÎµÎ»Î­ÏƒÎµÎ¹ ÎµÎ¯Î½Î±Î¹ ÎºÎ¬Ï„Î¹ Ï€Î¿Ï… Î¸Î± ÎµÎºÏ„Î¹Î¼Î¿ÏÏƒÎ± Î±Ï€ÏŒ Î­Î½Î±Î½ Ï„Î±Î»Î±Î½Ï„Î¿ÏÏ‡Î¿ Î±ÏƒÎºÎ¿ÏÎ¼ÎµÎ½Î¿;\"",
                                        "type": "text"
                                    },
                                    {
                                        "id": "experiment-1",
                                        "title": "ğŸ”¬ Î ÎµÎ¯ÏÎ±Î¼Î±: Î”Î¿ÎºÎ¹Î¼Î¬ÏƒÏ„Îµ Ï„Î¿Î½ ÎºÏ…ÏÎ¹Î¿Î»ÎµÎºÏ„Î¹ÎºÏŒ Î±ÏƒÎºÎ¿ÏÎ¼ÎµÎ½Î¿",
                                        "content": "Î‘Î½Î¿Î¯Î¾Ï„Îµ Ï„Î¿ ChatGPT Î® Î¿Ï€Î¿Î¹Î¿Î´Î®Ï€Î¿Ï„Îµ Î´Ï‰ÏÎµÎ¬Î½ ÎµÏÎ³Î±Î»ÎµÎ¯Î¿ Î¤Î ÎºÎ±Î¹ Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÏ„Îµ Î±Ï…Ï„Î¬ Ï„Î± Ï„ÏÎ¯Î± Ï€ÎµÎ¹ÏÎ¬Î¼Î±Ï„Î±:\n\nÎ ÎµÎ¯ÏÎ±Î¼Î± 1: Î— Î Î±Î³Î¯Î´Î± Ï„Î·Ï‚ ÎšÏ…ÏÎ¹Î¿Î»ÎµÎºÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±Ï‚\nÎ¡Ï‰Ï„Î®ÏƒÏ„Îµ: \"Î“ÏÎ¬ÏˆÎµ Î¼Î¿Ï… Î¼Î¹Î± ÏƒÏ…Î½Ï„Î±Î³Î® Î³Î¹Î± ÏƒÎ±Î»Î¬Ï„Î± Î³Î¹Î± 100 Î¬Ï„Î¿Î¼Î±.\"\nÎ Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ·: Î˜Î± ÏƒÎ±Ï‚ Î´ÏÏƒÎµÎ¹ Î¼Î¹Î± Ï„Î­Î»ÎµÎ¹Î± Î±Î½Î±Î»Î¿Î³Î¹ÎºÎ® ÏƒÏ…Î½Ï„Î±Î³Î®. Î”ÎµÎ½ Î¸Î± ÏÏ‰Ï„Î®ÏƒÎµÎ¹ Ï„Î¹ ÎµÎ¯Î´Î¿Ï…Ï‚ ÎµÎºÎ´Î®Î»Ï‰ÏƒÎ· ÎµÎ¯Î½Î±Î¹.\n\nÎ ÎµÎ¯ÏÎ±Î¼Î± 2: Î— Î Î±Î³Î¯Î´Î± Ï„Î·Ï‚ Î‘Ï…Î¸ÎµÎ½Ï„Î¯Î±Ï‚\nÎ¡Ï‰Ï„Î®ÏƒÏ„Îµ: \"Î Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Î· Î³Î½ÏÎ¼Î· Ï„Î¿Ï… [ÏŒÎ½Î¿Î¼Î± Î´Î¹Î¬ÏƒÎ·Î¼Î¿Ï… Ï€ÏÎ¿ÏƒÏÏ€Î¿Ï…] Î³Î¹Î± [Ï„ÏÎ­Ï‡Î¿Î½ Î³ÎµÎ³Î¿Î½ÏŒÏ‚];\"\nÎ Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ·: ÎœÏ€Î¿ÏÎµÎ¯ Î½Î± ÏƒÎ±Ï‚ Î´ÏÏƒÎµÎ¹ Ï€ÎµÎ¹ÏƒÏ„Î¹ÎºÎ® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ· Î±ÎºÏŒÎ¼Î± ÎºÎ¹ Î±Î½ Ï„Î¿ Ï€ÏÏŒÏƒÏ‰Ï€Î¿ Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎµÎºÏ†ÏÎ¬ÏƒÎµÎ¹ Ï€Î¿Ï„Î­ Î³Î½ÏÎ¼Î·.\n\nÎ ÎµÎ¯ÏÎ±Î¼Î± 3: Î— Î Î±Î³Î¯Î´Î± Ï„Î·Ï‚ Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎ·Ï‚\nÎ¡Ï‰Ï„Î®ÏƒÏ„Îµ: \"Î¤ÎµÎ»ÎµÎ¯Ï‰ÏƒÎµ Î±Ï…Ï„Î® Ï„Î· Ï†ÏÎ¬ÏƒÎ·: 'Î— ÎºÎ±Î»ÏÏ„ÎµÏÎ· ÏƒÏ„ÏÎ±Ï„Î·Î³Î¹ÎºÎ® Î³Î¹Î± Ï„Î·Î½ ÎµÏ„Î±Î¹ÏÎµÎ¯Î± Î¼Î¿Ï… ÎµÎ¯Î½Î±Î¹...'\"\nÎ Î±ÏÎ±Ï„Î®ÏÎ·ÏƒÎ·: Î˜Î± Î´ÏÏƒÎµÎ¹ Î³ÎµÎ½Î¹ÎºÎ® Î±Ï€Î¬Î½Ï„Î·ÏƒÎ· Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Î¾Î­ÏÎµÎ¹ Ï„Î¯Ï€Î¿Ï„Î± Î³Î¹Î± Ï„Î·Î½ ÎµÏ„Î±Î¹ÏÎµÎ¯Î± ÏƒÎ±Ï‚.",
                                        "type": "exercise",
                                        "difficulty": "easy",
                                        "expectedTime": 900000
                                    }
                                ]
                            }
                        }
                    ]
                };
            }

            async init() {
                console.log('Initializing Simple AI Orchestrator...');
                
                // Simulate loading time
                await this.delay(1500);
                
                // Hide loading screen
                document.getElementById('loading-screen').classList.add('hidden');
                
                // Show main interface
                document.getElementById('global-nav').classList.remove('hidden');
                document.getElementById('main-content').classList.remove('hidden');
                document.getElementById('aiq-indicator').classList.remove('hidden');
                
                // Load content
                this.loadChapter('test-chapter');
                
                // Setup event listeners
                this.setupEventListeners();
                
                console.log('Simple AI Orchestrator initialized successfully!');
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            loadChapter(chapterId) {
                const chapter = this.contentData.chapters.find(ch => ch.id === chapterId);
                if (!chapter) {
                    console.error('Chapter not found:', chapterId);
                    return;
                }

                const mainContent = document.getElementById('main-content');
                
                let html = `
                    <div id="reading-content-wrapper">
                        <div class="chapter-header">
                            <h1 class="chapter-title">${chapter.title}</h1>
                            <p class="chapter-subtitle">${chapter.subtitle}</p>
                            <div class="chapter-meta">
                                <div class="meta-item">
                                    <span>ğŸ“š</span>
                                    <span>Î•Ï€Î¯Ï€ÎµÎ´Î¿: ${chapter.level}</span>
                                </div>
                                <div class="meta-item">
                                    <span>â±ï¸</span>
                                    <span>Î”Î¹Î¬ÏÎºÎµÎ¹Î±: ${chapter.estimatedTime}</span>
                                </div>
                            </div>
                        </div>
                `;

                // Add introduction
                if (chapter.content.introduction) {
                    html += `
                        <div class="content-section">
                            <div class="paragraph-interaction-container">
                                <p class="section-content">${chapter.content.introduction}</p>
                                <button class="commit-button" onclick="app.commitParagraph(this)" data-paragraph="intro">
                                    âœ“
                                </button>
                            </div>
                        </div>
                    `;
                }

                // Add sections
                chapter.content.sections.forEach((section, index) => {
                    if (section.type === 'text') {
                        html += `
                            <div class="content-section">
                                <div class="element-interaction-container">
                                    <h2 class="section-title">${section.title}</h2>
                                    <button class="commit-button" onclick="app.commitElement(this)" data-element="title-${section.id}">
                                        âœ“
                                    </button>
                                </div>
                                <div class="paragraph-interaction-container">
                                    <div class="section-content">
                                        ${this.formatContentWithInteraction(section.content, section.id)}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (section.type === 'exercise') {
                        html += `
                            <div class="exercise-section">
                                <div class="element-interaction-container">
                                    <div class="exercise-header">
                                        <span class="exercise-icon">ğŸ¯</span>
                                        <h3 class="exercise-title">${section.title}</h3>
                                    </div>
                                    <button class="commit-button" onclick="app.commitElement(this)" data-element="exercise-${section.id}">
                                        âœ“
                                    </button>
                                </div>
                                <div class="paragraph-interaction-container">
                                    <div class="exercise-content">
                                        <p>${section.content}</p>
                                    </div>
                                    <button class="commit-button" onclick="app.commitParagraph(this)" data-paragraph="exercise-content-${section.id}">
                                        âœ“
                                    </button>
                                </div>
                                <button class="exercise-button" onclick="app.completeExercise('${section.id}')">
                                    ÎÎµÎºÎ¯Î½Î± Î†ÏƒÎºÎ·ÏƒÎ·
                                </button>
                            </div>
                        `;
                    }
                });
                
                html += '</div>'; // Close reading-content-wrapper

                mainContent.innerHTML = html;
            }

            formatContent(content) {
                // Convert newlines to paragraphs and handle lists
                return content
                    .split('\n')
                    .map(line => {
                        line = line.trim();
                        if (line.startsWith('- ')) {
                            return `<li>${line.substring(2)}</li>`;
                        } else if (line) {
                            return `<p>${line}</p>`;
                        }
                        return '';
                    })
                    .join('')
                    .replace(/(<li>.*<\/li>)/g, '<ul>$1</ul>');
            }
            
            formatContentWithInteraction(content, sectionId) {
                // Convert newlines to interactive paragraphs
                return content
                    .split('\n')
                    .map((line, index) => {
                        line = line.trim();
                        if (line.startsWith('- ')) {
                            return `
                                <div class="element-interaction-container">
                                    <li>${line.substring(2)}</li>
                                    <button class="commit-button" onclick="app.commitElement(this)" data-element="li-${sectionId}-${index}">
                                        âœ“
                                    </button>
                                </div>`;
                        } else if (line) {
                            return `
                                <div class="paragraph-interaction-container">
                                    <p>${line}</p>
                                    <button class="commit-button" onclick="app.commitParagraph(this)" data-paragraph="p-${sectionId}-${index}">
                                        âœ“
                                    </button>
                                </div>`;
                        }
                        return '';
                    })
                    .join('');
            }

            completeExercise(exerciseId) {
                console.log('Completing exercise:', exerciseId);
                
                // Increase AI-Q
                this.currentAIQ += 5;
                this.updateAIQDisplay();
                
                // Show completion message
                alert(`Î£Ï…Î³Ï‡Î±ÏÎ·Ï„Î®ÏÎ¹Î±! ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÏƒÎ±Ï„Îµ Ï„Î·Î½ Î¬ÏƒÎºÎ·ÏƒÎ·.\nAI-Q +5 (ÎÎ­Î¿ AI-Q: ${this.currentAIQ})`);
            }
            
            commitParagraph(button) {
                const container = button.closest('.paragraph-interaction-container');
                const paragraph = container.querySelector('p');
                
                if (!paragraph.classList.contains('p-committed')) {
                    // Add committed styling based on AI-Q level
                    const level = this.getTypographyLevel();
                    paragraph.classList.add('p-committed', `level-${level}`);
                    
                    // Trigger commit animation
                    button.classList.add('clicked');
                    
                    // Increase AI-Q
                    this.currentAIQ += 2;
                    this.updateAIQDisplay();
                    
                    // Create electrical spark effect to brain (AI-Q indicator)
                    this.createElectricalSpark(button, document.getElementById('aiq-indicator'));
                    
                    // Hide button after animation
                    setTimeout(() => {
                        button.style.display = 'none';
                    }, 400);
                }
            }
            
            commitElement(button) {
                const container = button.closest('.element-interaction-container');
                const element = container.querySelector('h1, h2, h3, h4, h5, h6, li');
                
                if (element && !element.classList.contains('element-committed')) {
                    // Add committed styling based on AI-Q level
                    const level = this.getTypographyLevel();
                    element.classList.add('element-committed', `level-${level}`);
                    
                    // Trigger commit animation
                    button.classList.add('clicked');
                    
                    // Increase AI-Q
                    this.currentAIQ += 3;
                    this.updateAIQDisplay();
                    
                    // Create electrical spark effect to brain (AI-Q indicator)
                    this.createElectricalSpark(button, document.getElementById('aiq-indicator'));
                    
                    // Hide button after animation
                    setTimeout(() => {
                        button.style.display = 'none';
                    }, 400);
                }
            }
            
            getTypographyLevel() {
                if (this.currentAIQ >= 160) return 4;
                if (this.currentAIQ >= 140) return 3;
                if (this.currentAIQ >= 120) return 2;
                if (this.currentAIQ >= 100) return 1;
                return 0;
            }
            
            createElectricalSpark(fromElement, toElement) {
                const fromRect = fromElement.getBoundingClientRect();
                const toRect = toElement.getBoundingClientRect();
                
                // Create spark element
                const spark = document.createElement('div');
                spark.className = 'electrical-spark';
                spark.style.cssText = `
                    position: fixed;
                    width: 6px;
                    height: 6px;
                    background: #00FFFF;
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 9999;
                    --spark-start-x: ${fromRect.left + fromRect.width / 2}px;
                    --spark-start-y: ${fromRect.top + fromRect.height / 2}px;
                    --spark-end-x: ${toRect.left + toRect.width / 2}px;
                    --spark-end-y: ${toRect.top + toRect.height / 2}px;
                    animation: electrical-spark-travel 0.8s ease-out forwards;
                `;
                
                document.body.appendChild(spark);
                
                // Add brain cell pulse effect
                const aiqIndicator = document.getElementById('aiq-indicator');
                aiqIndicator.classList.add('brain-cell-active');
                
                // Remove spark and effects after animation
                setTimeout(() => {
                    if (spark.parentNode) {
                        spark.parentNode.removeChild(spark);
                    }
                    aiqIndicator.classList.remove('brain-cell-active');
                }, 800);
                
                // Create sparkle burst at destination
                setTimeout(() => {
                    this.createSparkleBurst(toElement);
                }, 600);
            }
            
            createSparkleBurst(element) {
                const rect = element.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                // Create multiple sparkle particles
                for (let i = 0; i < 8; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle-particle';
                    
                    const angle = (i / 8) * Math.PI * 2;
                    const distance = 30 + Math.random() * 20;
                    const sparkX = Math.cos(angle) * distance;
                    const sparkY = Math.sin(angle) * distance;
                    
                    sparkle.style.cssText = `
                        position: fixed;
                        left: ${centerX}px;
                        top: ${centerY}px;
                        width: 4px;
                        height: 4px;
                        background: #FFD700;
                        border-radius: 50%;
                        pointer-events: none;
                        z-index: 9998;
                        --spark-x: ${sparkX}px;
                        --spark-y: ${sparkY}px;
                        animation: sparkle-burst 0.6s ease-out forwards;
                    `;
                    
                    document.body.appendChild(sparkle);
                    
                    // Remove sparkle after animation
                    setTimeout(() => {
                        if (sparkle.parentNode) {
                            sparkle.parentNode.removeChild(sparkle);
                        }
                    }, 600);
                }
            }

            updateAIQDisplay() {
                const aiqValue = document.getElementById('aiq-value');
                if (aiqValue) {
                    aiqValue.textContent = this.currentAIQ;
                }
            }

            setupEventListeners() {
                // AI-Q indicator click
                const aiqIndicator = document.getElementById('aiq-indicator');
                if (aiqIndicator) {
                    aiqIndicator.addEventListener('click', () => {
                        alert(`Î¤Î¿ AI-Q ÏƒÎ±Ï‚ ÎµÎ¯Î½Î±Î¹: ${this.currentAIQ}\n\nÎ¤Î¿ AI-Q Î±Ï…Î¾Î¬Î½ÎµÏ„Î±Î¹ ÏŒÏ„Î±Î½:\n- ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÎ½ÎµÏ„Îµ Î±ÏƒÎºÎ®ÏƒÎµÎ¹Ï‚ (+5)\n- Î”Î¹Î±Î²Î¬Î¶ÎµÏ„Îµ Ï€Î±ÏÎ±Î³ÏÎ¬Ï†Î¿Ï…Ï‚ (+2)\n- Î”Î¹Î±Î²Î¬Î¶ÎµÏ„Îµ Ï„Î¯Ï„Î»Î¿Ï…Ï‚/ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± (+3)\n- Î”Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯Ï„Îµ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚`);
                    });
                }
                
                // Show commit buttons on hover
                document.addEventListener('mouseenter', (e) => {
                    const container = e.target.closest('.paragraph-interaction-container, .element-interaction-container');
                    if (container) {
                        const button = container.querySelector('.commit-button');
                        if (button && !button.classList.contains('clicked')) {
                            button.classList.add('visible');
                        }
                    }
                }, true);
                
                document.addEventListener('mouseleave', (e) => {
                    const container = e.target.closest('.paragraph-interaction-container, .element-interaction-container');
                    if (container) {
                        const button = container.querySelector('.commit-button');
                        if (button && !button.classList.contains('clicked')) {
                            // Add timeout to hide button
                            setTimeout(() => {
                                if (!container.matches(':hover')) {
                                    button.classList.remove('visible');
                                    button.classList.add('slide-away');
                                    setTimeout(() => {
                                        button.classList.remove('slide-away');
                                    }, 600);
                                }
                            }, 1500);
                        }
                    }
                }, true);

                // Responsive handling
                this.handleResponsive();
                window.addEventListener('resize', () => this.handleResponsive());
            }

            handleResponsive() {
                const isMobile = window.innerWidth <= 768;
                console.log('Responsive mode:', isMobile ? 'mobile' : 'desktop');
                
                // Add mobile class to body for CSS targeting
                document.body.classList.toggle('mobile-view', isMobile);
            }
        }

        // Initialize application
        let app;
        document.addEventListener('DOMContentLoaded', function() {
            app = new SimpleAIOrchestrator();
            app.init().catch(error => {
                console.error('Failed to initialize application:', error);
                document.getElementById('loading-screen').innerHTML = `
                    <div style="text-align: center; color: #ef4444;">
                        <h2>Î£Ï†Î¬Î»Î¼Î± Î¦ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚</h2>
                        <p>Î Î±ÏÎ¿Ï…ÏƒÎ¹Î¬ÏƒÏ„Î·ÎºÎµ Ï€ÏÏŒÎ²Î»Î·Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ ÎµÎºÎºÎ¯Î½Î·ÏƒÎ· Ï„Î·Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚.</p>
                        <button onclick="location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #3b82f6; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">
                            Î•Ï€Î±Î½Î¬Î»Î·ÏˆÎ·
                        </button>
                    </div>
                `;
            });
        });

        // Global error handling
        window.addEventListener('error', function(event) {
            console.error('Global error:', event.error);
        });

        window.addEventListener('unhandledrejection', function(event) {
            console.error('Unhandled promise rejection:', event.reason);
        });

        // Module activation functions
        function toggleMarginalia() {
            if (window.SVGMarginalia) {
                if (!window.marginaliaInstance) {
                    window.marginaliaInstance = new SVGMarginalia();
                    alert('âœï¸ Marginalia ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ! Î¤ÏÏÎ± Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÏƒÏ‡ÎµÎ´Î¹Î¬ÏƒÎµÏ„Îµ ÏƒÏ„Î± Ï€ÎµÏÎ¹Î¸ÏÏÎ¹Î±.');
                } else {
                    alert('âœï¸ Marginalia ÎµÎ¯Î½Î±Î¹ Î®Î´Î· ÎµÎ½ÎµÏÎ³ÏŒ!');
                }
            } else {
                alert('âŒ Marginalia module Î´ÎµÎ½ Ï†Î¿ÏÏ„ÏÎ¸Î·ÎºÎµ ÏƒÏ‰ÏƒÏ„Î¬.');
            }
        }

        function toggleReading() {
            if (window.ReadingModule || window.readingModule) {
                if (!window.readingInstance) {
                    // Try both possible class names
                    const ReadingClass = window.ReadingModule || window.readingModule;
                    window.readingInstance = new ReadingClass();
                    if (window.readingInstance.init) {
                        window.readingInstance.init();
                    }
                    alert('ğŸ“Š Interactive Reading ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ! Tracking Ï„Î·Ï‚ Ï€ÏÎ¿ÏŒÎ´Î¿Ï… ÏƒÎ±Ï‚ Î¾ÎµÎºÎ¯Î½Î·ÏƒÎµ.');
                } else {
                    alert('ğŸ“Š Interactive Reading ÎµÎ¯Î½Î±Î¹ Î®Î´Î· ÎµÎ½ÎµÏÎ³ÏŒ!');
                }
            } else {
                alert('âŒ Reading module Î´ÎµÎ½ Ï†Î¿ÏÏ„ÏÎ¸Î·ÎºÎµ ÏƒÏ‰ÏƒÏ„Î¬.');
            }
        }

        function showStats() {
            let stats = "ğŸ“ˆ Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ Î‘Î½Î¬Î³Î½Ï‰ÏƒÎ·Ï‚:\n\n";
            stats += `AI-Q: ${app.currentAIQ}\n`;
            stats += `Î§ÏÏŒÎ½Î¿Ï‚ ÏƒÏ„Î· ÏƒÎµÎ»Î¯Î´Î±: ${Math.floor((Date.now() - (window.pageLoadTime || Date.now())) / 1000)} Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±\n`;
            
            if (window.readingInstance && window.readingInstance.readingStats) {
                stats += `Î›Î­Î¾ÎµÎ¹Ï‚ Ï€Î¿Ï… Î´Î¹Î±Î²Î¬ÏƒÏ„Î·ÎºÎ±Î½: ${window.readingInstance.readingStats.wordsRead || 'Î†Î³Î½Ï‰ÏƒÏ„Î¿'}\n`;
                stats += `ÎœÎ­ÏƒÎ¿Ï‚ ÏÏ…Î¸Î¼ÏŒÏ‚: ${window.readingInstance.readingStats.averageWPM || 'Î†Î³Î½Ï‰ÏƒÏ„Î¿'} WPM\n`;
            }
            
            if (window.marginaliaInstance && window.marginaliaInstance.annotations) {
                stats += `Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚: ${window.marginaliaInstance.annotations.size || 0}\n`;
            }
            
            alert(stats);
        }

        // Track page load time
        window.pageLoadTime = Date.now();
    </script>
</body>
</html>

